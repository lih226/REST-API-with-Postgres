# Building a REST API with Postgres

### REST API

* **POST - /films**
  * Accepts a JSON body to create a new film entry.
  * The server generates the `ID` and `DATE` (not provided by the client).
  * Returns a 400 error for missing fields.
  * The `film_id` field is unique and not null, generated by the server.

* **GET - /films**
  * Returns a JSON listing of all films in the database.

* **GET - /films/[film_id]**
  * Returns the details of a specific film in JSON format.
  * Includes all reviews for the film.
  * Returns a 404 error if the film does not exist.

* **PUT - /films/[film_id]**
  * Accepts a JSON body to update a film by `film_id`.
  * Creates the film if it does not exist.
  * Allows the client to include `DATE` but not `ID` in the JSON body.

* **DELETE - /films/[film_id]**
  * Deletes a film by `film_id`.
  * Returns a 404 error if the film does not exist.

* **POST - /films/[film_id]/reviews**
  * Accepts a JSON body to create a review for a specific film.
  * The server generates the `ID` and `DATE`.
  * Returns a 400 error for missing fields.

* **GET - /films/[film_id]/reviews**
  * Returns a JSON listing of all reviews for a specific film.

* **GET - /films/[film_id]/reviews/[review_id]**
  * Returns the details of a specific review in JSON format.
  * Returns a 404 error if the review does not exist.

* **PUT - /films/[film_id]/reviews/[review_id]**
  * Accepts a JSON body to update a review by `review_id`.
  * Creates the review if it does not exist.

* **DELETE - /films/[film_id]/reviews/[review_id]**
  * Deletes a review by `review_id`.
  * Returns a 404 error if the review does not exist.

### Search Functionality

* **GET - /films?search=[search_Query]**
  * Returns a JSON listing of all films that contain the `search_Query` in the title or body.

* **GET - /films/[film_id]/reviews?search=[search_Query]**
  * Returns a JSON listing of all reviews for a specific film that contain the `search_Query` in the title or body.

### Database Schema

**Table for Film**
- `film_id` (Primary Key): Unique ID for the film, generated server-side.
- `title`: Title of the film (up to 255 characters).
- `body`: Description of the film.
- `date`: Date when the film was added, generated server-side.

**Example JSON for Film**
```json
{
   "FilmID": 12, 
   "Title": "Citizen Kane", 
   "Body": "Rosebud!",
   "Date": "Wed, 24 Mar 2021 15:37:46 GMT"
}
```

**Table for Review**
- `review_id` (Primary Key): Unique ID for the review, generated server-side.
- `film_id` (Foreign Key): ID of the film this review is for.
- `title`: Title of the review.
- `body`: Body of the review.
- `date`: Date when the review was created, generated server-side.

**Example JSON for Review**
```json
{
   "ReviewID": 21, 
   "Title": "Citizen LAME!!!", 
   "Body": "It's just his stupid sled! That's it! I saved you 3 hours.",
   "Date": "Wed, 24 Mar 2021 15:37:46 GMT"
}
```

**Nested JSON Example**
```json
{
   "FilmID": 12, 
   "Title": "Home Alone", 
   "Body": "Staying home alone as a child...",
   "Date": "Wed, 24 Mar 2021 15:37:46 GMT",
   "Reviews": [
     {
       "ReviewID": 21, 
       "Title": "Hilarious", 
       "Body": "Funny video that's perfect for the Christmas season",
       "Date": "Wed, 24 Mar 2021 15:37:46 GMT"
     }
   ]
}
```